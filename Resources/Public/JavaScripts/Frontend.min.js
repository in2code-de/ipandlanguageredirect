function IpandlanguageredirectFrontend(){"use strict";var e=this,n="ipandlanguageredirect_container",a="fadein",t={r:1},r="temp",i=!1;this.initialize=function(){u(),d(),o(),E()&&f(w(),x())};var u=function(){window.location.search.indexOf("ipandlanguagedebug=1")!==-1&&(i=!0,console.log("ipandlanguageredirect debug activated"))},d=function(){g(),c()},o=function(){l(),s()},g=function(){var e=y("data-ipandlanguageredirect-action","hideMessage");for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];a.onclick=function(){F(),b()}}},c=function(){var e=T("h");"1"!==e&&"3"!==e||(F(),b())},l=function(){var e=y("data-ipandlanguageredirect-action","disableRedirect");for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];a.onclick=function(){M()}}},s=function(){var e=T("h");"2"!==e&&"3"!==e||M()},f=function(e,n){if(e){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText);p(e)}},a.open("POST",L(e,n),!0),a.send()}else console.log("No ajax URI given!")},p=function(n){if(n.activated&&Array.isArray(n.events))for(var a in n.events)n.events.hasOwnProperty(a)&&e[n.events[a]+"Event"](n)};this.redirectEvent=function(e){if(q())i&&console.log("Cookie already set");else{var n=A(e.redirectUri);M(),i?(console.log("Cookie set and redirect to following URI:"),console.log(n)):window.location=n}},this.suggestEvent=function(e){if(!j()){var n=A(e.redirectUri);i?(console.log("Suggest the following URI:"),console.log(n)):(v(e),h())}};var v=function(e){var n=m("data-ipandlanguageredirect-container","link");n.setAttribute("href",e.redirectUri)},h=function(){var e=m("data-ipandlanguageredirect-container","suggest");e.classList.add(a)},b=function(){var e=m("data-ipandlanguageredirect-container","suggest");e.classList.remove(a)},A=function(e){return L(e,t)},w=function(){var e=_();return null!==e?e.getAttribute("data-ipandlanguageredirect-ajaxuri"):""},_=function(){return document.getElementById(n)},m=function(e,n){var a=y(e,n);for(var t in a)if(a.hasOwnProperty(t)&&a[t].getAttribute(e)===n)return a[t];return null},y=function(e,n){return document.querySelectorAll("["+e+'="'+n+'"]')},x=function(){return{"tx_ipandlanguageredirect_pi1[browserLanguage]":I(),"tx_ipandlanguageredirect_pi1[ipAddress]":U(),"tx_ipandlanguageredirect_pi1[referrer]":k(),"tx_ipandlanguageredirect_pi1[languageUid]":P(),"tx_ipandlanguageredirect_pi1[rootpageUid]":R(),"tx_ipandlanguageredirect_pi1[countryCode]":S(),"tx_ipandlanguageredirect_pi1[domain]":C()}},I=function(){var e=null,n=_();return null!==n&&n.hasAttribute("data-ipandlanguageredirect-browserlanguage")&&(e=n.getAttribute("data-ipandlanguageredirect-browserlanguage")),null===e&&(e=O()),e},O=function(){var e=navigator.language||navigator.userLanguage;void 0!==navigator.languages&&void 0!==navigator.languages[0]&&(e=navigator.languages[0]);var n=e.split("-");return n[0]},U=function(){var e="",n=_();return null!==n&&n.hasAttribute("data-ipandlanguageredirect-ipaddress")&&(e=n.getAttribute("data-ipandlanguageredirect-ipaddress")),e},k=function(){var e=null,n=_();return null!==n&&n.hasAttribute("data-ipandlanguageredirect-referrer")&&(e=n.getAttribute("data-ipandlanguageredirect-referrer")),null===e&&(e=document.referrer),e},P=function(){var e=0,n=_();if(null!==n&&n.hasAttribute("data-ipandlanguageredirect-languageuid")){var a=n.getAttribute("data-ipandlanguageredirect-languageuid");e=parseInt(a)}return e},R=function(){var e=1,n=_();if(null!==n&&n.hasAttribute("data-ipandlanguageredirect-rootpageuid")){var a=n.getAttribute("data-ipandlanguageredirect-rootpageuid");e=parseInt(a)}return e},S=function(){var e="",n=_();if(null!==n&&n.hasAttribute("data-ipandlanguageredirect-countrycode")){var a=n.getAttribute("data-ipandlanguageredirect-countrycode");null!==a&&(e=a)}return e},C=function(){var e="",n=_();if(null!==n&&n.hasAttribute("data-ipandlanguageredirect-domain")){var a=n.getAttribute("data-ipandlanguageredirect-domain");null!==a&&(e=a)}return e},E=function(){var e=_();return null!==e&&"1"!==T("r")},L=function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e+=e.indexOf("?")!==-1?"&":"?",e+=a+"="+n[a]);return e},T=function(e){var n=null,a=[];return window.location.search.substr(1).split("&").forEach(function(t){a=t.split("="),a[0]===e&&(n=decodeURIComponent(a[1]))}),n},j=function(){return"1"===N("ipandlanguageredirect_hidemessage")},q=function(){return"1"===N("ipandlanguageredirect_disableredirect")},z=function(e,n,a){if("permanent"===a){var t=new Date,r=t.getTime();r+=31536e6,t.setTime(r),document.cookie=e+"="+n+"; expires="+t.toUTCString()+"; path=/"}else document.cookie=e+"="+n+"; path=/"},F=function(){z("ipandlanguageredirect_hidemessage","1",r)},M=function(){z("ipandlanguageredirect_disableredirect","1",r)},N=function(e){for(var n=e+"=",a=document.cookie.split(";"),t=0;t<a.length;t++){for(var r=a[t];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(n))return r.substring(n.length,r.length)}return""}}var Ipandlanguageredirect=new window.IpandlanguageredirectFrontend;Ipandlanguageredirect.initialize();